Обновление прошивки автопилота
==============================

Для корректной работы всех систем Пионера необходимо устанавливать последнюю актуальную версию прошивки. Процедура обновления и настройки происходит с помощью программы  Pioneer Station. 
Скачать актуальную версию программы можно из раздела `Pioneer Station`_. 

.. important:: Перед осуществлением первого полета, обязательно обновите прошивку и параметры автопилота "Пионера Мини". Полет с устаревшей версией прошивки автопилота ниже чем |utd_ap_base| может быть небезопасен.

Инструкция по обновлению прошивки автопилота "Пионера"
------------------------------------------------------

1. Cкачайте актуальную версию прошивки |fw_ap_base|. Тестовые и ранние версии находятся в разделе :doc:`../../../downloads/software-d`.

2. Подключите квадрокоптер к компьютеру с помощью кабеля micro-USB. Плата автопилота, при помощи светодиодов, сообщит об успешном подключении. 

3. Запустите программу "Pioneer Station". В левом нижнем углу нажмите кнопку **"Подключение"** и выберете **"По кабелю USB"**

  .. figure:: ../../../_static/images/firmware_upd_all/fw_upd_step1.PNG

  .. note:: Если по истечении 10 секунд окно программы не обновилось, попробуйте переподключить квадрокоптер и перезапустить программу. Если это не помогло, попробуйте `скачать и установить драйвер порта`_, после чего переподключите "Пионер" и перезапустите программу.

4. В верхнем правом углу нажмите иконку **"квадрокоптера"** и выберете **"Обновление прошивки"**

  .. figure:: ../../../_static/images/firmware_upd_all/fw_upd_step2.PNG

5. В открывшемся окне нажмите **"Далее"**. Коптер перейдёт в в режим **загрузчика**. Обратите внимание, как поменялась цветовая индикация на Пионере. В следующем окне нажмите **"Обновить"** и выберете модуль **"PioneerBase"** это и есть базовая плата "Пионера".

  .. container:: flexrow

    .. figure:: ../../../_static/images/firmware_upd_all/fw_upd_step3.PNG

    .. figure:: ../../../_static/images/firmware_upd_all/fw_upd_base_step4.PNG

  .. note:: Если при выборе устройства квадрокоптер не отображается в окне, нажмите кнопку "Обновить" еще раз.

6. В следующем окне нажмите **"Из файла"** и укажите путь к ранее скачанному файлу **pioneer_lua-education-v12-boot_gs_dev-1.6.xxxx.bin** 

  .. attention:: Обратите внимание версия прошивки должна быть |utd_ap_base| или старше. 

  .. figure:: ../../../_static/images/firmware_upd_all/fw_upd_base_step5.PNG

7. Нажмите **Прошить**. Обновление может занимать до нескольких минут в зависимости от вашего ПК.

  .. attention:: Не прерывайте соединение USB между коптером и ПК во время обновления, это может привести к серьезным проблемам и временному выходу квадрокоптера из строя!

8. Дождитесь окончания прошивки, это может занять несколько минут. После завершения нажмите "ОК", после чего отключите питание по USB-кабелю и подключите заново тем самым выполнив перезагрузку.

9. Заново подключитесь к квадрокоптеру в стандартном режиме по USB и проверьте версию АП. Если прошивка прошла успешно в столбце *"Версия"* вы увидите значение не меньше чем |utd_ap_base|. Если в графе "Отказы" осталась ошибка *RESTART_REQUIRED* - повторите перезагрузку. 

  .. figure:: ../../../_static/images/firmware_upd_all/fw_upd_base_step6.PNG

.. note:: Чтобы включить "Пионер" в режиме обновления (загрузчика, bootloader), зажмите кнопку "Старт" перед подачей питания на квадрокоптер. Все светодиоды при этом должны гореть постоянно.

.. tip:: Если у вас возникли вопросы по изменению тех или иных параметров, вы всегда можете обратиться в техподдержку написав на почту support@geoscan.aero или в `telegram-канал <https://t.me/geoscan_edu>`_.

.. _Pioneer Station: ../../../programming/pioneer_station/pioneer_station_main.html
.. _скачать и установить драйвер порта: https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers